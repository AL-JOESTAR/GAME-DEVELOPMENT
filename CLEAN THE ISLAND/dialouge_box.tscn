[gd_scene load_steps=3 format=3 uid="uid://b7q0xklam663h"]

[ext_resource type="Texture2D" uid="uid://bedfainmwoy6w" path="res://assests/collection/chatbox.png" id="2_2pspd"]

[sub_resource type="GDScript" id="GDScript_iem86"]
script/source = "# SimpleDialogueBox.gd - Super minimal
extends CanvasLayer

class_name SimpleDialogueBox

signal dialogue_finished

@onready var text_label = $Control/RichTextLabel
@onready var name_label = $Control/NameContainer/Name

var current_lines = []
var current_index = 0
var is_active = false

func show_dialogue(speaker: String, lines: Array):
	current_lines = lines
	current_index = 0
	is_active = true
	
	name_label.text = speaker
	show()
	
	show_next_line()

func show_next_line():
	if current_index >= current_lines.size():
		close()
		return
	
	text_label.text = current_lines[current_index]
	text_label.visible_characters = 0
	
	# Simple typewriter effect
	for i in range(current_lines[current_index].length() + 1):
		text_label.visible_characters = i
		await get_tree().create_timer(0.03).timeout
	
	current_index += 1

func _input(event):
	if is_active and event.is_action_pressed(\"ui_accept\"):
		show_next_line()

func close():
	hide()
	is_active = false
	dialogue_finished.emit()
"

[node name="DialougeBox" type="CanvasLayer"]
script = SubResource("GDScript_iem86")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="NinePatchRect" type="NinePatchRect" parent="Control"]
layout_mode = 0
offset_right = 594.0
offset_bottom = 228.0
texture = ExtResource("2_2pspd")

[node name="NameContainer" type="HBoxContainer" parent="Control"]
layout_mode = 0
offset_left = 11.0
offset_top = 6.0
offset_right = 307.0
offset_bottom = 46.0

[node name="Name" type="Label" parent="Control/NameContainer"]
layout_mode = 2
text = "Name"

[node name="RichTextLabel" type="RichTextLabel" parent="Control"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Label" type="Label" parent="Control"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0
